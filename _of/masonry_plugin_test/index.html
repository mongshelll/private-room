<!DOCTYPE html>
<html lang="ko">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Masonry Plugin Test</title>

	<!-- css -->
	<link rel="stylesheet" href="css/ui_style.css">

	<!-- js -->
	<script src="js/ui_plugin.js"></script>
</head>
<body>
	<h1>Masonry - gutter, margin bottom</h1>

	<div class="btn-wrap">
		<button type="button" data-target="all">category all</button>
		<button type="button" data-target="category01">category01</button>
		<button type="button" data-target="category02">category02</button>
		<button type="button" data-target="category03">category03</button>
	</div>

	<div class="cont-wrap">
		<div class="grid" data-target="masonry">
			<div class="grid-sizer"></div>
			<div class="grid-item" data-category="category01">1</div>
			<div class="grid-item grid-item--height2" data-category="category02">2</div>
			<div class="grid-item grid-item--height3" data-category="category03">3</div>
			<div class="grid-item grid-item--height2" data-category="category02">4</div>
			<div class="grid-item" data-category="category01">5</div>
			<div class="grid-item" data-category="category01">6</div>
			<div class="grid-item" data-category="category03">7</div>
			<div class="grid-item grid-item--height2" data-category="category02">8</div>
			<div class="grid-item grid-item--height3" data-category="category03">9</div>
			<div class="grid-item" data-category="category01">10</div>
			<div class="grid-item grid-item--height2" data-category="category02">11</div>
			<div class="grid-item" data-category="category01">12</div>
			<div class="grid-item grid-item--height2" data-category="category02">13</div>
			<div class="grid-item grid-item--height2" data-category="category02">14</div>
			<div class="grid-item" data-category="category03">15</div>
			<div class="grid-item grid-item--height2" data-category="category03">16</div>
			<div class="grid-item" data-category="category03">17</div>
			<div class="grid-item grid-item--height2" data-category="category03">18</div>
			<div class="grid-item" data-category="category02">19</div>
			<div class="grid-item grid-item--height2" data-category="category03">20</div>
			<div class="grid-item" data-category="category02">21</div>
			<div class="grid-item" data-category="category03">22</div>
			<div class="grid-item grid-item--height2" data-category="category03">23</div>
		</div>
	</div>

	<script>
		const $gridContainer = document.querySelector('.grid');
		const masonry = new Masonry( $gridContainer, {
			// options
			itemSelector: '.grid-item',
			columnWidth: '.grid-sizer',
			horizontalOrder: true,
			gutter: 20
		});



		/* filter 기능 */
		const filterGrid = triggerBtn => {
			const gridItems = $gridContainer.querySelectorAll("[data-category]");
			const targetCategory = triggerBtn.dataset.target;

			if (targetCategory) {
				gridItems.forEach(item => {
					const shouldShow = targetCategory === "all" || item.dataset.category === targetCategory;
					item.classList.toggle('is-hidden', !shouldShow);
				});
				masonry.layout();
			}
		};



		// const filterGrid = triggerBtn => {
		// 	const $gridItem = $gridContainer.querySelectorAll("[data-category]");
		// 	if ( triggerBtn.dataset.target ) {
		// 		$gridItem.forEach( items => {
		// 			if( triggerBtn.dataset.target === "all" || items.dataset.category === triggerBtn.dataset.target ) {
		// 				items.classList.remove('is-hidden');
		// 			} else {
		// 				items.classList.add('is-hidden');
		// 			}
		// 		})
		// 		msnry.layout();
		// 	}
		// };

		const $filterBtnWrap = document.querySelector('.btn-wrap');
		$filterBtnWrap.addEventListener("click", (e) => {
			filterGrid(e.target);
		})
	</script>
</body>
</html>