/*!
* jQueryTouch v0.0.6
* https://github.com/a-fung/jQueryTouch
*
* Copyright 2012 Man Kwan Liu
* Released under the Apache License Version 2.0
* http://www.apache.org/licenses/
*
* Date: Wed Oct 2012 23:14:09 GMT-0700 (Pacific Daylight Time)
*/
(function($){$.fn.touchInit=function(f){if(!f||typeof(f)!="object"){f={}}f=$.extend({preventDefault:true,mouse:true,pen:true,maxtouch:-1,prefix:""},f);if(f.maxtouch==0)return this;if(window.navigator.msPointerEnabled){if(f.preventDefault){var g=this.data("_touchtrack-ms-touch-action");if(g==undefined||g==null){g=[]}g[f.prefix+"_track"]=true;this.data("_touchtrack-ms-touch-action",g);this.css("-ms-touch-action","none")}}this.each(function(){var e=this,_touch_handler=null,touches=null;$(this).data(f.prefix+"_touches",[]);_touch_handler=function(a){var b=[];if(a.pointerType){if((a.pointerType==a.MSPOINTER_TYPE_MOUSE&&!f.mouse)||(a.pointerType==a.MSPOINTER_TYPE_PEN&&!f.pen)){return}b[0]={id:a.pointerId,clientX:a.clientX,clientY:a.clientY,pageX:a.pageX,pageY:a.pageY,screenX:a.screenX,screenY:a.screenY}}else if(a.changedTouches){for(var i=0;i<a.changedTouches.length;i++){b[i]={id:a.changedTouches[i].identifier,clientX:a.changedTouches[i].clientX,clientY:a.changedTouches[i].clientY,pageX:a.changedTouches[i].pageX,pageY:a.changedTouches[i].pageY,screenX:a.changedTouches[i].screenX,screenY:a.changedTouches[i].screenY}}}else{b[0]={id:-1,clientX:a.clientX,clientY:a.clientY,pageX:a.pageX,pageY:a.pageY,screenX:a.screenX,screenY:a.screenY}}for(var i=0;i<b.length;i++){var c=b[i],currentTouchIndex=null,newTouch=true,eventType;touches=$(e).data(f.prefix+"_touches");for(var j=0;j<touches.length;j++){if(touches[j].id==c.id){newTouch=false;touches[j]=c;$(e).data(f.prefix+"_touches",touches);currentTouchIndex=j;break}}if(newTouch&&this!=e){continue}if(a.type=="touchstart"||a.type=="MSPointerDown"||a.type=="mousedown"){if(newTouch){if(f.maxtouch<0||f.maxtouch>touches.length){touches[touches.length]=c;$(this).data(f.prefix+"_touches",touches)}else{continue}if(a.pointerType){document.addEventListener("MSPointerMove",_touch_handler,false);document.addEventListener("MSPointerUp",_touch_handler,false);document.addEventListener("MSPointerCancel",_touch_handler,false)}else{document.addEventListener("touchmove",_touch_handler,false);document.addEventListener("touchend",_touch_handler,false);document.addEventListener("touchcancel",_touch_handler,false);if(f.mouse){$(document).on("mousemove",_touch_handler);$(document).on("mouseup",_touch_handler)}}}eventType="start"}else if(a.type=="touchmove"||a.type=="MSPointerMove"||a.type=="mousemove"){eventType="move"}else if(a.type=="touchend"||a.type=="touchcancel"||a.type=="MSPointerUp"||a.type=="MSPointerCancel"||a.type=="mouseup"){if(touches.length-1!=currentTouchIndex){touches[currentTouchIndex]=touches[touches.length-1]}touches.pop();$(e).data(f.prefix+"_touches",touches);if(touches.length==0){if(a.pointerType){document.removeEventListener("MSPointerMove",_touch_handler,false);document.removeEventListener("MSPointerUp",_touch_handler,false);document.removeEventListener("MSPointerCancel",_touch_handler,false)}else{document.removeEventListener("touchmove",_touch_handler,false);document.removeEventListener("touchend",_touch_handler,false);document.removeEventListener("touchcancel",_touch_handler,false);if(f.mouse){$(document).off("mousemove",_touch_handler);$(document).off("mouseup",_touch_handler)}}}eventType="end"}else{continue}var d=$.Event(f.prefix+"touch_"+eventType);d=$.extend(d,{originalType:a.type,clientX:c.clientX,clientY:c.clientY,pageX:c.pageX,pageY:c.pageY,screenX:c.screenX,screenY:c.screenY,touches:touches});try{$(e).trigger(d)}catch(error){console.log(error)}}if(f.preventDefault){a.preventDefault&&a.preventDefault();return false}};if(window.navigator.msPointerEnabled){this.addEventListener("MSPointerDown",_touch_handler,false)}else{this.addEventListener("touchstart",_touch_handler,false);f.mouse&&$(this).on("mousedown",_touch_handler)}$(this).data(f.prefix+"_touch_handler",_touch_handler)});return this};$.fn.touchDispose=function(b){if(!b||typeof(b)!="string"){b=""}if(window.navigator.msPointerEnabled){var c=this.data("_touchtrack-ms-touch-action");if(c==undefined||c==null){c=[]}delete c[options.prefix+"_track"];this.data("_touchtrack-ms-touch-action",c);var i=0;for(j in c)i++;if(i==0)this.css("-ms-touch-action","")}this.each(function(){var a=$(this).data(b+"_touch_handler");this.removeEventListener("MSPointerDown",a,false);this.removeEventListener("touchstart",a,false);$(this).off("mousedown",a);document.removeEventListener("MSPointerMove",a,false);document.removeEventListener("MSPointerUp",a,false);document.removeEventListener("MSPointerCancel",a,false);document.removeEventListener("touchmove",a,false);document.removeEventListener("touchend",a,false);document.removeEventListener("touchcancel",a,false);$(this).off("mousemove",a);$(this).off("mouseup",a);$(this).removeData(b+"_touch_handler");$(this).removeData(b+"_touches")});return this}})(jQuery);




/*!
* jQueryTouch v0.0.6
* https://github.com/a-fung/jQueryTouch
*
* Copyright 2012 Man Kwan Liu
* Released under the Apache License Version 2.0
* http://www.apache.org/licenses/
*
* Date: Wed Oct 2012 23:14:09 GMT-0700 (Pacific Daylight Time)
*/
(function($){$.fn.swipe=function(c,d){if(typeof(c)!="function")return this;if(!d||typeof(d)!="object"){d={}}d=$.extend({preventDefault:true,mouse:true,pen:true,distance:50},d);var e={preventDefault:d.preventDefault,mouse:d.mouse,pen:d.pen,maxtouch:1,prefix:"_swipe_"};var f,original_x,original_y,sqr=function(n){return n*n};var g=function(a){if(a.type=="_swipe_touch_start"){f=true;original_x=a.pageX;original_y=a.pageY}else{if(f){if(Math.sqrt(sqr(a.pageX-original_x)+sqr(a.pageY-original_y))>=d.distance){f=false;var b,angle=Math.atan2(a.pageY-original_y,a.pageX-original_x)/Math.PI*8;if(angle<-7){b="left"}else if(angle<-5){b="upleft"}else if(angle<-3){b="up"}else if(angle<-1){b="upright"}else if(angle<1){b="right"}else if(angle<3){b="downright"}else if(angle<5){b="down"}else if(angle<7){b="downleft"}else{b="left"}try{c(b)}catch(error){console.log(error)}}}if(a.type=="_swipe_touch_end"){f=false}}};this.touchInit(e);this.on("_swipe_touch_start",g);this.on("_swipe_touch_move",g);this.on("_swipe_touch_end",g);return this}})(jQuery);




/*!
* jQueryTouch v0.0.6
* https://github.com/a-fung/jQueryTouch
*
* Copyright 2012 Man Kwan Liu
* Released under the Apache License Version 2.0
* http://www.apache.org/licenses/
*
* Date: Wed Oct 2012 23:14:09 GMT-0700 (Pacific Daylight Time)
*/
(function($){$.fn.gesture=function(c){if(!c||typeof(c)!="object"){c={}}c=$.extend({drag:true,scale:true,rotate:true,touchtarget:null},c);var d=c.touchtarget?$(c.touchtarget):this,_this=this,in_drag=false,in_gesture=false,original_x=0,original_y=0,original_css="",__getvalue__=function(a){return(typeof(a)=="function")?a():a};var e=function(a){if(in_gesture||!__getvalue__(c.drag))return;if(in_drag){var b=((a.touches.length==0)?a.pageX:a.touches[0].pageX)-original_x,dy=((a.touches.length==0)?a.pageY:a.touches[0].pageY)-original_y,new_css="translate("+b+"px,"+dy+"px) "+original_css;_this.__transform__(new_css)}else{if(in_drag=a.type=="_gesture2_touch_start"){original_x=a.touches[0].pageX;original_y=a.touches[0].pageY;original_css=_this.__transform__();if(!original_css||original_css=="none")original_css=""}}if(a.type=="_gesture2_touch_end"){in_drag=false}};var f=function(a){in_drag=false;if(!__getvalue__(c.scale)&&!__getvalue__(c.rotate))return;if(in_gesture){var b=a.pageX-original_x,dy=a.pageY-original_y,new_css=(__getvalue__(c.drag)?("translate("+a.pageX+"px,"+a.pageY+"px) "):("translate("+original_x+"px,"+original_y+"px) "))+(__getvalue__(c.scale)?("scale("+a.scale+")"):"")+(__getvalue__(c.rotate)?("rotate("+a.rotation+"rad) "):"")+"translate("+(-original_x)+"px,"+(-original_y)+"px) "+original_css;_this.__transform__(new_css)}else{in_gesture=true;original_css=_this.__transform__();original_x=a.pageX;original_y=a.pageY;if(!original_css||original_css=="none")original_css=""}if(a.type=="_gesture2_gesture_end"){in_gesture=false}};d.gestureInit({prefix:"_gesture2_",gesture_prefix:"_gesture2_"});d.on("_gesture2_touch_start",e);d.on("_gesture2_touch_move",e);d.on("_gesture2_touch_end",e);d.on("_gesture2_gesture_start",f);d.on("_gesture2_gesture_move",f);d.on("_gesture2_gesture_end",f);return this};$.fn.__transform__=function(a){if(typeof(a)=="undefined")return this.css("transform");if(typeof(a)=="string"){if(!this.data("__offset__")){this.css("transform","");this.css("-moz-transform","");this.css("-ms-transform","");this.css("-o-transform","");this.css("-webkit-transform","");var b=(-this.offset().left)+"px "+(-this.offset().top)+"px";this.css("transform-origin",b);this.css("-moz-transform-origin",b);this.css("-ms-transform-origin",b);this.css("-o-transform-origin",b);this.css("-webkit-transform-origin",b);this.data("__offset__",b)}this.css("transform",a);this.css("-moz-transform",a);this.css("-ms-transform",a);this.css("-o-transform",a);this.css("-webkit-transform",a)}return this}})(jQuery);




/*!
* jQueryTouch v0.0.6
* https://github.com/a-fung/jQueryTouch
*
* Copyright 2012 Man Kwan Liu
* Released under the Apache License Version 2.0
* http://www.apache.org/licenses/
*
* Date: Wed Oct 2012 23:14:09 GMT-0700 (Pacific Daylight Time)
*/
(function($){$.fn.gestureInit=function(e){if(!e||typeof(e)!="object"){e={}}e=$.extend({prefix:"_gesture_",gesture_prefix:""},e);if(!e.prefix)e.prefix="_gesture_";var f={preventDefault:true,mouse:true,pen:true,maxtouch:2,prefix:e.prefix};var g,original_angle,id1,sqr=function(n){return n*n};var h=function(a){var b=[],eventType=null;if(a.touches.length==2){b=a.touches;if(a.type==e.prefix+"touch_start"){eventType="start";g=Math.sqrt(sqr(b[0].pageX-b[1].pageX)+sqr(b[0].pageY-b[1].pageY));original_angle=Math.atan2(b[0].pageY-b[1].pageY,b[0].pageX-b[1].pageX);id1=b[0].id}else if(a.type==e.prefix+"touch_move"){eventType="move"}}else if(a.touches.length==1&&a.type==e.prefix+"touch_end"){eventType="end";var c={clientX:a.clientX,clientY:a.clientY,pageX:a.pageX,pageY:a.pageY,screenX:a.screenX,screenY:a.screenY};b=(id1==a.touches[0].id)?[a.touches[0],c]:[c,a.touches[0]]}if(eventType){var d=$.Event(e.gesture_prefix+"gesture_"+eventType);d=$.extend(d,{scale:Math.sqrt(sqr(b[0].pageX-b[1].pageX)+sqr(b[0].pageY-b[1].pageY))/g,rotation:Math.atan2(b[0].pageY-b[1].pageY,b[0].pageX-b[1].pageX)-original_angle,clientX:(b[0].clientX+b[1].clientX)/2,clientY:(b[0].clientY+b[1].clientY)/2,pageX:(b[0].pageX+b[1].pageX)/2,pageY:(b[0].pageY+b[1].pageY)/2,screenX:(b[0].screenX+b[1].screenX)/2,screenY:(b[0].screenY+b[1].screenY)/2});try{$(this).trigger(d)}catch(error){console.log(error)}}};this.touchInit(f);this.on(e.prefix+"touch_start",h);this.on(e.prefix+"touch_move",h);this.on(e.prefix+"touch_end",h);this.data(e.gesture_prefix+"_gesture_handler",h);return this};$.fn.gestureDispose=function(a,b){if(!a||typeof(a)!="string"){a="_gesture_"}if(!b||typeof(b)!="string"){a=""}var c=this.data(b+"_gesture_handler");this.off(a+"touch_start",c);this.off(a+"touch_move",c);this.off(a+"touch_end",c);this.removeData(b+"_gesture_handler");this.touchDispose(a);return this}})(jQuery);